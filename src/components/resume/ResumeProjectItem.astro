---
import Icon from "../ui/Icon.astro";
import { cleanUrlForDisplay } from "../../utils/resume.utils";

interface Props {
  title: string;
  technologies: string[];
  description?: string;
  projectUrl?: string;
  githubUrl?: string;
}

const { title, technologies, description, projectUrl, githubUrl } = Astro.props;

const linkUrl = projectUrl || githubUrl;
const linkType = projectUrl ? "project" : "github";
const displayUrl = linkUrl ? cleanUrlForDisplay(linkUrl) : null;
---

<div class="mb-1.5 print:mb-1">
  <div class="flex items-start justify-between gap-2">
    <h3 class="flex-1 text-xs font-bold print:text-[10px]">{title}</h3>
    {
      displayUrl && (
        <a
          href={linkUrl}
          target="_blank"
          rel="noopener noreferrer"
          class="text-text-secondary flex items-center gap-1 text-[10px] underline transition-colors hover:text-accent-one print:text-[9px]"
        >
          <span class="whitespace-nowrap">{displayUrl}</span>
          <Icon
            name={
              linkType === "github"
                ? "simple-icons:github"
                : "mdi:external-link"
            }
            class="no-print h-3 w-3"
          />
        </a>
      )
    }
  </div>

  <p class="text-text-secondary mb-0.5 text-[10px] print:mb-0 print:text-[9px]">
    {technologies.join(", ")}
  </p>

  {
    description && (
      <p class="text-text-primary text-xs leading-snug print:text-[10px] print:leading-tight">
        {description}
      </p>
    )
  }
</div>
